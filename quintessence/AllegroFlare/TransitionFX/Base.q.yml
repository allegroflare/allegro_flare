properties:


  - name: pasteboard_a
    type: ALLEGRO_BITMAP*
    init_with: nullptr
    getter: explicit

  - name: pasteboard_b
    type: ALLEGRO_BITMAP*
    init_with: nullptr
    getter: explicit

  - name: duration_sec
    type: float
    init_with: 1.0f
    constructor_arg: true

  - name: position
    type: float
    init_with: 0.0f

  - name: finished
    type: bool
    init_with: false
    getter: true

  - name: initialized
    type: bool
    init_with: false


functions:


  - name: initialize
    guards: [ (!initialized) ]
    body: |
      pasteboard_a = al_create_bitmap(1920, 1080);
      pasteboard_b = al_create_bitmap(1920, 1080);
      initialized = true;
      return;


  - name: get_pasteboard_a
    type: ALLEGRO_BITMAP*
    guards: [ initialized ]
    body: |
      return pasteboard_a;


  - name: get_pasteboard_b
    type: ALLEGRO_BITMAP*
    guards: [ initialized ]
    body: |
      return pasteboard_b;


  - name: update
    virtual: true
    guards: [ initialized ]
    body: |
      position += 1.0 / 60.0;
      if (position >= duration_sec) finished = true;
      return;


  - name: render
    virtual: true
    guards: [ initialized ]
    body: |
      float alpha = 1.0 - (duration_sec - position) / duration_sec;
      al_draw_bitmap(pasteboard_a, 0, 0, 0);
      al_draw_tinted_bitmap(pasteboard_b, ALLEGRO_COLOR{alpha, alpha, alpha, alpha}, 0, 0, 0);
      return;


dependencies:


  - symbol: ALLEGRO_BITMAP*
    headers: [ allegro5/allegro.h ]
 

