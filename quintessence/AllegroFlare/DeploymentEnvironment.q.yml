properties:


  - name: environment
    type: std::string
    constructor_arg: true
    init_with: ENVIRONMENT_UNDEF
    getter: true

  - name: ENVIRONMENT_UNDEF
    type: char*
    init_with: '"undefined"'
    static: true
    constexpr: true

  - name: ENVIRONMENT_TEST
    type: char*
    init_with: '"test"'
    static: true
    constexpr: true

  - name: ENVIRONMENT_DEVELOPMENT
    type: char*
    init_with: '"development"'
    static: true
    constexpr: true

  - name: ENVIRONMENT_PRODUCTION
    type: char*
    init_with: '"production"'
    static: true
    constexpr: true


functions:


  - name: set_environment
    parameters:
      - name: environment
        type: std::string
        default_argument: ENVIRONMENT_UNDEF
    guards: [ is_valid(environment) ]
    body: |
      // TODO: If an invalid argument is passed, include the argument value in an error message
      this->environment = environment;
      return;


  - name: is_undefined
    type: bool
    body: |
      return environment == ENVIRONMENT_UNDEF;


  - name: is_production
    type: bool
    body: |
      return environment == ENVIRONMENT_PRODUCTION;


  - name: is_test
    type: bool
    body: |
      return environment == ENVIRONMENT_TEST;


  - name: is_development
    type: bool
    body: |
      return environment == ENVIRONMENT_DEVELOPMENT;


  - name: is_valid
    static: true
    type: bool
    parameters:
      - name: environment
        type: std::string
        default_argument: ENVIRONMENT_UNDEF
    body: |
      static std::set<std::string> valid_environments = {
         ENVIRONMENT_PRODUCTION,
         ENVIRONMENT_TEST,
         ENVIRONMENT_DEVELOPMENT,
      };
      // NOTE: Should consider an update to -std=c++20 which has `contains` for a std::set
      // https://en.cppreference.com/w/cpp/container/set/contains

      return valid_environments.find(environment) != valid_environments.end();
    body_dependency_symbols:
      - std::set


  - name: is_invalid
    static: true
    type: bool
    parameters:
      - name: environment
        type: std::string
        default_argument: ENVIRONMENT_UNDEF
    body: |
      return !is_valid(environment);


  - name: get_data_folder_path
    type: std::string
    guards: [ is_valid() ]
    body: |
      if (environment == ENVIRONMENT_PRODUCTION)
      {
         return "./data/";
      }
      else if (environment == ENVIRONMENT_TEST)
      {
         return "./tests/fixtures/";
      }
      else if (environment == ENVIRONMENT_DEVELOPMENT)
      {
         return "./bin/programs/data/";
      }
      else
      {
         AllegroFlare::Logger::throw_error("AllegroFlare::DeploymentEnvironment::get_base_data_path",
            "Unexpected error occurred where a path was requested on an invalid deployment environment."
            );
      }
      return "";
    body_dependency_symbols:
      - AllegroFlare::Logger


dependencies:


  - symbol: AllegroFlare::Logger
    headers: [ AllegroFlare/Logger.hpp ]


