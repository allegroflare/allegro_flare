properties:


  - name: cursor_location
    type: AllegroFlare::Vec2D
    init_with: '{}'

  - name: cursor_location_destination
    type: AllegroFlare::Vec2D
    init_with: '{}'

  - name: cursor_size
    type: AllegroFlare::Vec2D
    init_with: '80, 80'

  - name: cursor_size_destination
    type: AllegroFlare::Vec2D
    init_with: '80, 80'

  - name: cursor_reposition_multiplier
    type: float
    init_with: DEFAULT_CURSOR_REPOSITION_MULTIPLIER
    getter: true
    setter: false

  - name: DEFAULT_CURSOR_REPOSITION_MULTIPLIER
    type: float
    constexpr: true
    static: true
    init_with: 0.6f


functions:


  - name: reposition_to
    parameters:
      - name: x
        type: float
        default_argument: 0.0f
      - name: y
        type: float
        default_argument: 0.0f
    body: |
      cursor_location_destination = AllegroFlare::Vec2D(x, y);
      return;
    body_dependency_symbols:
      - AllegroFlare::Vec2D


  - name: update
    body: |
      cursor_location = (cursor_location_destination - cursor_location)
                      * cursor_reposition_multiplier + cursor_location;
      cursor_size = (cursor_size_destination - cursor_size)
                  * cursor_reposition_multiplier + cursor_size;
      return;


  - name: render
    guards: [ al_is_system_installed(), al_is_primitives_addon_initialized() ]
    body: |
      draw_cursor();
      return;
    body_dependency_symbols:
      - AllegroFlare::Vec2D
      - al_draw_rounded_rectangle


  - name: build_cursor_color
    private: true
    type: ALLEGRO_COLOR
    body: |
      ALLEGRO_COLOR color_a = al_color_name("aquamarine");
      ALLEGRO_COLOR color_b = AllegroFlare::color::transparent;
      float speed_multiplier = 0.9;
      float mix_factor = AllegroFlare::interpolator::slow_in(fmod(al_get_time() * speed_multiplier, 1.0));
      return AllegroFlare::color::mix(color_a, color_b, 0.7 * mix_factor);


  - name: draw_cursor_rectangle
    private: true
    parameters:
      - name: x
        type: float
        default_argument: 0.0f
      - name: y
        type: float
        default_argument: 0.0f
      - name: w
        type: float
        default_argument: 0.0f
      - name: h
        type: float
        default_argument: 0.0f
    body: |
      // color
      ALLEGRO_COLOR color = build_cursor_color();
      float roundness = 8;
      float thickness = 6.0;

      al_draw_rounded_rectangle(x, y, x + w, y + h, roundness, roundness, color, thickness);
      return;
    body_dependency_symbols:
      - fmod
      - AllegroFlare::Color
      - AllegroFlare::interpolator


  - name: draw_cursor
    private: true
    body: |
      draw_cursor_rectangle(cursor_location.x, cursor_location.y, cursor_size.x, cursor_size.y);
      return;


dependencies:


  - symbol: fmod
    headers: [ cmath ]
  - symbol: AllegroFlare::FontBin
    headers: [ AllegroFlare/FontBin.hpp ]
  - symbol: ALLEGRO_COLOR
    headers: [ allegro5/allegro.h ]
  - symbol: ALLEGRO_FONT
    headers: [ allegro5/allegro_font.h ]
  - symbol: al_draw_rounded_rectangle
    headers: [ allegro5/allegro_primitives.h ]
  - symbol: AllegroFlare::Vec2D
    headers: [ AllegroFlare/Vec2D.hpp ]
  - symbol: AllegroFlare::Color
    headers: [ AllegroFlare/Color.hpp ]
  - symbol: AllegroFlare::interpolator
    headers: [ AllegroFlare/Interpolators.hpp ]


