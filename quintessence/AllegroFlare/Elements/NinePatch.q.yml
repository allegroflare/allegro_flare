properties:


  - name: source_texture
    type: ALLEGRO_BITMAP*
    init_with: nullptr
    getter: true
    setter: true

  - name: left_column_width
    type: float
    init_with: 128.0f

  - name: center_column_width
    type: float
    init_with: 128.0f

  - name: right_column_width
    type: float
    init_with: 128.0f

  - name: top_row_height
    type: float
    init_with: 128.0f

  - name: middle_row_height
    type: float
    init_with: 128.0f

  - name: bottom_row_height
    type: float
    init_with: 128.0f

  - name: mesh
    type: std::vector<ALLEGRO_VERTEX>
    init_with: ''


methods:


  - name: render
    type: void
    guards: [ al_is_system_installed(), al_is_primitives_addon_initialized(), source_texture ]
    body: |
      al_draw_prim(&mesh[0], NULL, source_texture, 0, mesh.size(), ALLEGRO_PRIM_TRIANGLE_LIST);

      //al_draw_prim(v, NULL, NULL, 0, 4, ALLEGRO_PRIM_TRIANGLE_FAN);
      return;
    body_dependency_symbols:
      - al_is_system_installed
      - al_is_primitives_addon_initialized


  - name: build_mesh
    type: void
    body: |
      mesh.clear();
      //vector1.insert(vector1.end(), vector2.begin(), vector2.end());
      std::vector<ALLEGRO_VERTEX> top_left_patch = adjust_rect(
            build_vertices_for_rect(),
            0,
            0,
            left_column_width,
            top_row_height,
            0,
            0,
            32,
            32
         );
      mesh.insert(mesh.end(), top_left_patch.begin(), top_left_patch.end());
      // TODO: Continue to add remaining patches
      return;


  - name: build_vertices_for_rect
    type: std::vector<ALLEGRO_VERTEX>
    body: |
      std::vector<ALLEGRO_VERTEX> result = {
         ALLEGRO_VERTEX{0, 0, 0, 0, 0, ALLEGRO_COLOR{1, 1, 1, 1}},
         ALLEGRO_VERTEX{1, 0, 0, 1, 0, ALLEGRO_COLOR{1, 1, 1, 1}},
         ALLEGRO_VERTEX{0, 1, 0, 0, 1, ALLEGRO_COLOR{1, 1, 1, 1}},
         ALLEGRO_VERTEX{1, 0, 0, 1, 0, ALLEGRO_COLOR{1, 1, 1, 1}},
         ALLEGRO_VERTEX{0, 1, 0, 0, 1, ALLEGRO_COLOR{1, 1, 1, 1}},
         ALLEGRO_VERTEX{1, 1, 0, 1, 1, ALLEGRO_COLOR{1, 1, 1, 1}},
      };
      return result;


  - name: adjust_rect
    type: std::vector<ALLEGRO_VERTEX>
    parameters:
      - name: vertices
        type: std::vector<ALLEGRO_VERTEX>
        default_argument: '{}'
      - name: x
        type: float
        default_argument: 0.0f
      - name: y
        type: float
        default_argument: 0.0f
      - name: w
        type: float
        default_argument: 0.0f
      - name: h
        type: float
        default_argument: 0.0f
      - name: u
        type: float
        default_argument: 0.0f
      - name: v
        type: float
        default_argument: 0.0f
      - name: uw
        type: float
        default_argument: 0.0f
      - name: vh
        type: float
        default_argument: 0.0f
    body: |
      for (auto &vertex : vertices)
      {
         vertex.x = vertex.x * w + x;
         vertex.y = vertex.y * h + y;
         vertex.u = vertex.u * uw + u;
         vertex.v = vertex.v * vh + v;
      }
      return vertices;


dependencies:


  - symbol: ALLEGRO_BITMAP
    headers: [ allegro5/allegro.h ]
  - symbol: ALLEGRO_VERTEX
    headers: [ allegro5/allegro_primitives.h ]
  - symbol: al_is_system_installed
    headers: [ allegro5/allegro.h ]
  - symbol: al_is_primitives_addon_initialized
    headers: [ allegro5/allegro_primitives.h ]


