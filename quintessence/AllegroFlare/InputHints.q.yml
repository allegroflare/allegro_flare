properties:


  - name: font_bin
    type: AllegroFlare::FontBin*
    init_with: nullptr
    constructor_arg: true

  - name: quote
    type: std::string
    init_with: '{}'


functions:


  - name: render
    type: void
    guards:
      - al_is_system_installed()
      - al_is_font_addon_initialized()
      - al_is_ttf_addon_initialized()
      - al_is_primitives_addon_initialized()
    body: |
      int surface_width = 1920;
      int surface_height = 1080;
      
      // draw inputs
      float height = 60;
      float hud_opacity = 0.35;
      ALLEGRO_COLOR backfill_color = ALLEGRO_COLOR{0, 0, 0, hud_opacity};
      al_draw_filled_rectangle(0, surface_height-height, surface_width, surface_height, backfill_color);

      // draw inputs text
      ALLEGRO_FONT *font = obtain_font(); //font_bin["SourceSerif4_18pt-SemiBoldItalic.ttf -30"];
      std::string SPACER = "         ";
      std::string inputs = "[W/A/S/D]  Move cursor"
                         + SPACER + "[N/P]  Next/Previous entity"
                         + SPACER + "[Shift+8]  Capture screenshot"
                         + SPACER + "[PAD +/-]  Zoom"
                         + SPACER + "[ESC]  Toggle Inventory"
                         + SPACER + "[-/+]  Change time of day";
      //float text_width = al_get_text_width(font, inputs.str());
      float text_height = al_get_font_line_height(font);
      al_draw_text(
         font,
         ALLEGRO_COLOR{1, 1, 1, 1},
         surface_width/2,
         (int)(surface_height-text_height/2-height/2),
         ALLEGRO_ALIGN_CENTER,
         inputs.c_str()
      );
      return;
    body_dependency_symbols:
      - al_is_system_installed
      - al_is_font_addon_initialized
      - al_is_ttf_addon_initialized
      - al_is_primitives_addon_initialized



  - name: obtain_font
    private: true
    type: ALLEGRO_FONT*
    guards: [ font_bin ]
    body: |
      std::string font_name = "Inter-Medium.ttf";
      int font_size = -20;

      std::stringstream composite_font_str;
      composite_font_str << font_name << " " << font_size;
      return font_bin->auto_get(composite_font_str.str());


dependencies:


  - symbol: AllegroFlare::FontBin*
    headers: [ AllegroFlare/FontBin.hpp ]
  - symbol: ALLEGRO_FONT*
    headers: [ allegro5/allegro_font.h ]
  - symbol: al_is_system_installed
    headers: [ allegro5/allegro.h ]
  - symbol: al_is_font_addon_initialized
    headers: [ allegro5/allegro_font.h ]
  - symbol: al_is_ttf_addon_initialized
    headers: [ allegro5/allegro_ttf.h ]
  - symbol: al_is_primitives_addon_initialized
    headers: [ allegro5/allegro_primitives.h ]


