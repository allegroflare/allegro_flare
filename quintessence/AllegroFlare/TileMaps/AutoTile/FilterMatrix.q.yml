properties:


  - name: matrix
    type: std::vector<std::vector<int>>
    init_with: ''
    getter: true
    setter: false

  - name: axis
    type: std::pair<int, int>
    init_with: std::make_pair(0, 0)


functions:


  - name: build
    type: AllegroFlare::TileMaps::AutoTile::FilterMatrix
    static: true
    parameters:
      - name: matrix
        type: std::vector<std::vector<int>>
        default_argument: '{}'
    body:
       AllegroFlare::TileMaps::AutoTile::FilterMatrix result;
       result.set_matrix(matrix);
       return result;


  - name: set_matrix
    parameters:
      - name: matrix
        type: std::vector<std::vector<int>>
        default_argument: '{}'
    guards: [ (STATIC_is_valid(matrix)) ]
    body: |
      this->matrix = matrix;
      return;


  - name: STATIC_is_valid
    static: true
    parameters:
      - name: matrix
        type: std::vector<std::vector<int>>
        default_argument: '{}'
    type: bool
    body: |
      // the height is not 0
      if (matrix.size() == 0) return false;

      // the width is not zero
      if (matrix[0].size() == 0) return false;
      
      // all rows have the same width
      std::size_t row_width = matrix[0].size();
      for (auto &row : matrix)
      {
         if (matrix[0].size() != row_width) return false;
      }
      return true;


  - name: resize
    parameters:
      - name: width
        type: int
        default_argument: 1
      - name: height
        type: int
        default_argument: 1
    guards: [ (width > 1), (height > 1) ]
    body: |
      matrix.resize(height);
      for (auto &row : matrix)
      {
         row.resize(width, 0);
      }
      return;


  - name: get_width
    type: int
    const: true
    body: |
      if (matrix.empty()) return 0;
      return matrix[0].size();


  - name: get_height
    type: int
    const: true
    body: |
      return matrix.size();


  - name: set_tile
    parameters:
      - name: x
        type: int
        default_argument: 0
      - name: y
        type: int
        default_argument: 0
      - name: tile_value
        type: int
        default_argument: 0
    guards: [ (x < get_width()), (y < get_height()), (x >= 0), (y >= 0) ]
    body: |
      matrix[y][x] = tile_value;


dependencies:


  - symbol: AllegroFlare::TileMaps::AutoTile::FilterMatrix
    headers: [ AllegroFlare/TileMaps/AutoTile/FilterMatrix.hpp ]


